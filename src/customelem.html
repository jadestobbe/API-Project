<link rel="import" href="@polymer/polymer/polymer.html" />

<dom-module id="custom-elem">
  <template>
    <style>
      form {
                width:500px;
                margin:50px auto;
            }
      .search {
                padding:8px 15px;
                background:rgba(50, 50, 50, 0.2);
                border:0px solid #dbdbdb;
              }
      .button {
                position:relative;
                padding:6px 15px;
                left:-8px;
                border:2px solid #207cca;
                background-color:#207cca;
                color:#fafafa;
              }
    .button:hover  {
                background-color:#fafafa;
                color:#207cca;
              }
    </style>
    <template is="dom-if" if="[[_initFinished]]">
      <template is="dom-if" if="[[_view1]]">
        <h1>Search for a Summoner!</h1>
      </template>
      <template is="dom-if" if="[[_view2]]">
        <template is="dom-if" if="[[!_summonerFound]]">
          <h1>Sorry we couldn't find anyone with that Summoner Name</h1>
        </template>
        <template is="dom-if" if="[[_summonerFound]]">
          <h1>[[summonerName]]</h1>
          <div>
            <p>Ranked Solo 5v5 Stats</p>
            <ul>
              <li>Rank: [[rank]]</li>
              <li>Total Games Played: [[totalGames]]</li>
              <li>Wins: [[wins]]</li>
              <li>Losses: [[losses]]</li>
            </ul>
            <a href="./[[summonerNameLowercase]]/recientGames"><button>View Recient Games</button></a>
          </div>
        </template>
      </template>
      <template is="dom-if" if="[[_view3]]">
        <h1>Recient Games</h1>
        <template is="dom-repeat" item="{{recientGames}}">
          <div>
            <h2>Type: {{item.subType}}</h2>
            <h3>Win/Loss: {{item.stats.win}}</h3>
          </div>
        </template>
        <a href="./[[summonerNameLowercase]]"><button>Back to Summoner Profile</button></a>
      </template>
    </template>
  </template>
  <script>
    // element registration
    Polymer({
      is: "custom-elem",
      // add properties and methods on the element's prototype
      properties: {
        // declare properties for the element's public API
        _summonerFound: {
          type: Boolean,
          value: false
        },
        summonerNameLowercase:{
          type: String,
          value: ""
        },
        summonerName: {
          type: String,
          value: ""
        },
        summonerId: {
          type: Number,
          value: 0
        },
        wins:{
          type: Number,
          value: 0
        },
        losses:{
          type: Number,
          value: 0
        },
        totalGames:{
          type: Number,
          value: 0
        },
        rank:{
          type: String,
          value: ""
        },
        recientGames:{
          type: Array,
          value: []
        },
        _initFinished: {
          type: Boolean,
          value: false
        },
        _view1: {
          type: Boolean,
          value: false
        },
        _view2: {
          type: Boolean,
          value: false
        },
        _view3: {
          type: Boolean,
          value: false
        }
      },
      attached: function () {
        this._initFinished = true;
        var searchBar = document.forms["searchBar"];
        var summonerName = searchBar["summonerName"];
        var submitButton = searchBar[1];
        submitButton.addEventListener('click', function(evt){
          evt.preventDefault();
          page.show("/"+summonerName.value.toLowerCase());
          }, false);


      },
      _view: function(v){
        if (v === "view1"){
          this._view1 = true;
          this._view2 = false;
          this._view3 = false;
        }
        else if (v === "view2"){
          this._view1 = false;
          this._view2 = true;
          this._view3 = false;
        }
        else if (v === "view3"){
          this._view1 = false;
          this._view2 = false;
          this._view3 = true;
        }
      }
    });
  </script>
</dom-module>
